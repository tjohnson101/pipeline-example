<?xml version="1.0" encoding="UTF-8"?>
<urn:AdapterConfiguration authnCtxClassRef="" isInheritAttributeSettings="false" isInheritAttributeMapping="false" maskOgnlValues="false" uniqueUserKeyField="pf_none" isInheritExtendedContractAttributes="false" name="certAdapter" xmlns:urn="urn:sourceid.org:saml2:adapter:conf">
    <urn:Fields>
        <urn:Field name="Client Auth Port">9032</urn:Field>
        <urn:Field name="Client Auth Hostname">localhost</urn:Field>
        <urn:Field name="Parse Client Cert Subject and Issuer DNs">true</urn:Field>
        <urn:Field name="Match Issuer DN in Client X.509 certificate">false</urn:Field>
        <urn:Field name="Return Success On SLO">true</urn:Field>
        <urn:Field name="Authentication Context">Default</urn:Field>
        <urn:Field name="Custom Authentication Context"/>
        <urn:Field name="Include Subject Alternative Name (SAN)">true</urn:Field>
    </urn:Fields>
    <urn:AdvancedFields>
        <urn:Field name="Return Success On SLO">true</urn:Field>
        <urn:Field name="Authentication Context">Default</urn:Field>
        <urn:Field name="Custom Authentication Context"/>
        <urn:Field name="Include Subject Alternative Name (SAN)">true</urn:Field>
    </urn:AdvancedFields>
    <urn:Tables>
        <urn:Table name="Constrain Acceptable Root Issuers"/>
    </urn:Tables>
    <urn:ExtendedContractAttributes>
        <urn:AttributeName>deviceID</urn:AttributeName>
        <urn:AttributeName>hexEncoded</urn:AttributeName>
    </urn:ExtendedContractAttributes>
    <urn:ExtendedAttributesAdditionalProperties/>
    <urn:UniqueKeyField>SubjectDN</urn:UniqueKeyField>
    <urn:AttributeMapping>
        <urn1:AttributeMap Name="IssuerDN" Type="Adapter" xmlns:urn1="urn:sourceid.org:saml2:metadata-extension:v2">
            <urn1:ValueText>IssuerDN</urn1:ValueText>
        </urn1:AttributeMap>
        <urn1:AttributeMap Name="SerialNumber" Type="Adapter" xmlns:urn1="urn:sourceid.org:saml2:metadata-extension:v2">
            <urn1:ValueText>SerialNumber</urn1:ValueText>
        </urn1:AttributeMap>
        <urn1:AttributeMap Name="SubjectDN" Type="Adapter" xmlns:urn1="urn:sourceid.org:saml2:metadata-extension:v2">
            <urn1:ValueText>SubjectDN</urn1:ValueText>
        </urn1:AttributeMap>
        <urn1:AttributeMap Name="deviceID" Type="Text" xmlns:urn1="urn:sourceid.org:saml2:metadata-extension:v2">
            <urn1:ValueText>ThomasJohnson@icconsult940.onmicrosoft.com</urn1:ValueText>
        </urn1:AttributeMap>
        <urn1:AttributeMap Name="email" Type="Adapter" xmlns:urn1="urn:sourceid.org:saml2:metadata-extension:v2">
            <urn1:ValueText>email</urn1:ValueText>
        </urn1:AttributeMap>
        <urn1:AttributeMap Name="ClientCertificateChain" Type="Adapter" xmlns:urn1="urn:sourceid.org:saml2:metadata-extension:v2">
            <urn1:ValueText>ClientCertificateChain</urn1:ValueText>
        </urn1:AttributeMap>
        <urn1:AttributeMap Name="hexEncoded" Type="Expression" xmlns:urn1="urn:sourceid.org:saml2:metadata-extension:v2">
            <urn1:ValueText>#x509Cert = #this.get("ClientCertificateChain").getObjectValue(), #hexEncoded = new String (@org.apache.commons.codec.binary.Hex@encodeHex (#x509Cert.getSignature()))</urn1:ValueText>
        </urn1:AttributeMap>
        <urn1:AttributeSource Id="PingDirLDAP" Description="pingdir" Type="LDAP" DataSourceId="LDAP-E2FC09DEBEA981E1048A833F59528972D1CDEADB" xmlns:urn1="urn:sourceid.org:saml2:metadata-extension:v2">
            <urn1:Parameter Name="filter" Value="cn=${hexEncoded}"/>
            <urn1:Parameter Name="search_base" Value=""/>
            <urn1:Parameter Name="search_attributes" Value="Subject DN,cn"/>
            <urn1:Parameter Name="search_scope" Value="SUBTREE_SCOPE"/>
            <urn1:Parameter Name="memberof_nested_group" Value="false"/>
        </urn1:AttributeSource>
        <urn1:TokenAuthorizationIssuanceCriteria xmlns:urn1="urn:sourceid.org:saml2:metadata-extension:v2"/>
    </urn:AttributeMapping>
</urn:AdapterConfiguration>